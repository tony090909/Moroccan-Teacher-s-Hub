<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moroccan Teacher's Hub</title>
  <!-- Link to the Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Custom font setup -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- Header Section -->
  <header class="bg-emerald-600 text-white shadow-lg">
    <div class="container mx-auto px-6 py-4 flex flex-col sm:flex-row justify-between items-center">
      <h1 class="text-2xl font-bold tracking-tight">Moroccan Teacher's Hub</h1>
      <nav class="mt-2 sm:mt-0">
        <a href="#" class="hover:text-emerald-200 transition-colors duration-300 mx-2">Home</a>
        <a href="#" class="hover:text-emerald-200 transition-colors duration-300 mx-2">About</a>
        <a href="#" class="hover:text-emerald-200 transition-colors duration-300 mx-2">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-emerald-500 to-emerald-700 text-white py-16 px-6 sm:py-24 text-center rounded-b-3xl shadow-xl">
      <div class="container mx-auto">
        <h2 class="text-4xl sm:text-5xl font-extrabold mb-4 leading-tight">
          Empowering English Teachers in Morocco
        </h2>
        <p class="text-lg sm:text-xl max-w-2xl mx-auto mb-8 font-light">
          Discover and share high-quality, culturally-relevant lesson plans for all levels.
        </p>
        <!-- Search Bar -->
        <div class="max-w-2xl mx-auto">
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <!-- Search Icon (Inline SVG) -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.3-4.3" />
              </svg>
            </div>
            <input
              type="text"
              id="searchInput"
              class="block w-full pl-10 pr-3 py-3 text-base text-gray-900 rounded-full border-2 border-transparent focus:outline-none focus:ring-4 focus:ring-emerald-300 focus:border-emerald-300 transition-all duration-200"
              placeholder="Search for grammar, speaking, a specific topic..."
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Lesson Plans Grid Section -->
    <section class="container mx-auto px-6 py-12">
      <h2 class="text-3xl font-bold mb-8 text-center text-gray-800">
        Available Lesson Plans
      </h2>
      <div id="lessonPlansContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- Lesson plans will be dynamically inserted here by JavaScript -->
      </div>
    </section>
  </main>

  <!-- Footer Section -->
  <footer class="bg-gray-800 text-gray-300 py-6 mt-12">
    <div class="container mx-auto px-6 text-center text-sm">
      <p>&copy; 2025 Moroccan Teacher's Hub. All rights reserved.</p>
      <p class="mt-1">Designed with <span class="text-red-500">❤️</span> for educators in Morocco.</p>
    </div>
  </footer>

  <!-- JavaScript for dynamic content and search functionality -->
  <script>
    // Mock data for lesson plans based on search results
    const mockLessonPlans = [
      {
        id: 1,
        title: "Speaking: My Daily Routine",
        description: "A communicative lesson for A2 level students focusing on telling the time and describing daily activities using the simple present tense. Includes pair work and a short presentation task.",
        tags: ["Speaking", "A2", "Simple Present"],
        grade: "Middle School (7th Grade)",
        level: "A2",
      },
      {
        id: 2,
        title: "Grammar: Quantifiers (some, any, much, many)",
        description: "An engaging lesson plan for B1 level students on how to use quantifiers with countable and uncountable nouns. The lesson includes a Moroccan market role-play activity.",
        tags: ["Grammar", "Vocabulary", "B1"],
        grade: "High School (1st Year Bac)",
        level: "B1",
      },
      {
        id: 3,
        title: "Reading: The Environment & Ecology",
        description: "A reading comprehension lesson plan for B2 level students on environmental issues. The lesson encourages critical thinking and includes a debate on local ecological challenges.",
        tags: ["Reading", "Environment", "B2"],
        grade: "High School (2nd Year Bac)",
        level: "B2",
      },
      {
        id: 4,
        title: "Writing: How to Write a Formal Letter",
        description: "A detailed lesson plan for B1 students on the structure and language of a formal letter. Students practice writing a letter of complaint or a job application.",
        tags: ["Writing", "B1", "Formal Letter"],
        grade: "High School (1st Year Bac)",
        level: "B1",
      },
      {
        id: 5,
        title: "Vocabulary: Food & Moroccan Cuisine",
        description: "A fun lesson for A1 students to learn food vocabulary. The lesson culminates in a group activity where students create a menu for a Moroccan restaurant.",
        tags: ["Vocabulary", "A1", "Culture"],
        grade: "Primary School (5th Grade)",
        level: "A1",
      },
      {
        id: 6,
        title: "Grammar: The Passive Voice",
        description: "An advanced grammar lesson for C1 students on forming and using the passive voice. The lesson includes an activity on analyzing news headlines.",
        tags: ["Grammar", "C1", "Advanced"],
        grade: "High School (2nd Year Bac)",
        level: "C1",
      },
    ];

    // Helper function to create SVG icons
    const svgIcons = {
      bookOpen: `<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></svg>`,
      tag: `<svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.41 2.41 0 0 0 3.408 0l7.172-7.172a2.41 2.41 0 0 0 0-3.408z" /><circle cx="7.5" cy="7.5" r=".5" fill="currentColor" /></svg>`,
      users: `<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></svg>`,
      graduationCap: `<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10v6M12 10V4M12 4L4 9l8 5 8-5-8-5z" /><path d="M20 16a2 2 0 0 0 2-2v-4" /><path d="M4 16a2 2 0 0 1-2-2v-4" /><path d="M12 22a2 2 0 0 0 2-2v-4" /><path d="M10 22a2 2 0 0 1-2-2v-4" /></svg>`
    };

    // Get DOM elements
    const searchInput = document.getElementById('searchInput');
    const lessonPlansContainer = document.getElementById('lessonPlansContainer');

    // Function to render lesson plan cards
    function renderLessonPlans(plans) {
      lessonPlansContainer.innerHTML = ''; // Clear previous content
      
      if (plans.length === 0) {
        lessonPlansContainer.innerHTML = `
          <div class="text-center p-12 bg-white rounded-xl shadow-md col-span-full">
            <p class="text-xl text-gray-600">
              No lesson plans found for your search query. Please try a different term.
            </p>
          </div>
        `;
        return;
      }

      plans.forEach(plan => {
        const tagHtml = plan.tags.map(tag => `
          <span class="bg-gray-100 text-gray-700 text-xs font-medium px-2.5 py-0.5 rounded-full flex items-center">
            ${svgIcons.tag}
            ${tag}
          </span>
        `).join('');

        const cardHtml = `
          <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 transform hover:-translate-y-1">
            <div class="flex items-center space-x-3 mb-4 text-emerald-600">
              ${svgIcons.bookOpen}
              <h3 class="text-xl font-semibold text-gray-800">${plan.title}</h3>
            </div>
            <p class="text-gray-600 mb-4 text-sm leading-relaxed">${plan.description}</p>
            <div class="flex flex-wrap items-center gap-2 mb-4">
              ${tagHtml}
            </div>
            <div class="flex items-center space-x-4 border-t pt-4 text-gray-500">
              <div class="flex items-center space-x-1">
                ${svgIcons.graduationCap}
                <span class="text-xs font-medium">${plan.level} Level</span>
              </div>
              <div class="flex items-center space-x-1">
                ${svgIcons.users}
                <span class="text-xs font-medium">${plan.grade}</span>
              </div>
            </div>
          </div>
        `;
        lessonPlansContainer.innerHTML += cardHtml;
      });
    }

    // Initial render of all lesson plans
    document.addEventListener('DOMContentLoaded', () => {
      renderLessonPlans(mockLessonPlans);
    });

    // Add event listener to the search input
    searchInput.addEventListener('input', (event) => {
      const searchTerm = event.target.value.toLowerCase();
      const filteredPlans = mockLessonPlans.filter(plan =>
        plan.title.toLowerCase().includes(searchTerm) ||
        plan.description.toLowerCase().includes(searchTerm) ||
        plan.tags.some(tag => tag.toLowerCase().includes(searchTerm))
      );
      renderLessonPlans(filteredPlans);
    });
  </script>

</body>
</html>
import { useState, useEffect } from 'react';
import { initializeApp } from 'firebase/app';
import { getAuth, signInAnonymously, onAuthStateChanged, signOut } from 'firebase/auth';
import { getFirestore, collection, onSnapshot, addDoc, serverTimestamp, query } from 'firebase/firestore';
import { getStorage, ref, uploadString, getDownloadURL } from 'firebase/storage';

// Inline SVG icons for the UI
const IconSearch = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" /></svg>);
const IconBookOpen = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></svg>);
const IconTag = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.41 2.41 0 0 0 3.408 0l7.172-7.172a2.41 2.41 0 0 0 0-3.408z" /><circle cx="7.5" cy="7.5" r=".5" fill="currentColor" /></svg>);
const IconUpload = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><path d="M12 13v6" /><path d="m15 16-3-3-3 3" /></svg>);
const IconImage = (props) => (<svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2" /><circle cx="9" cy="9" r="2" /><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" /></svg>);

// Main App component
export default function App() {
  const [db, setDb] = useState(null);
  const [auth, setAuth] = useState(null);
  const [userId, setUserId] = useState(null);
  const [isAdmin, setIsAdmin] = useState(false);
  const [loading, setLoading] = useState(true);
  const [lessonPlans, setLessonPlans] = useState([]);
  const [error, setError] = useState(null);

  // Admin panel state
  const [showAdminPanel, setShowAdminPanel] = useState(false);
  const [newPlan, setNewPlan] = useState({ title: '', description: '', tags: '', level: '', grade: '', driveLink: '' });
  const [coverPrompt, setCoverPrompt] = useState('');
  const [generatingImage, setGeneratingImage] = useState(false);
  const [coverImage, setCoverImage] = useState('');
  const [uploading, setUploading] = useState(false);

  // Search state
  const [searchTerm, setSearchTerm] = useState('');
  
  // Initialize Firebase and auth state listener
  useEffect(() => {
    try {
      const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
      const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
      const app = initializeApp(firebaseConfig);
      const firestoreDb = getFirestore(app);
      const firebaseAuth = getAuth(app);
      setDb(firestoreDb);
      setAuth(firebaseAuth);

      const unsubscribe = onAuthStateChanged(firebaseAuth, async (currentUser) => {
        if (currentUser) {
          // Replace with your actual owner ID
          const ownerId = "your_user_id_here"; 
          setIsAdmin(currentUser.uid === ownerId);
          setUserId(currentUser.uid);
        } else {
          await signInAnonymously(firebaseAuth);
        }
        setLoading(false);
      });
      return () => unsubscribe();
    } catch (e) {
      console.error("Firebase initialization failed:", e);
      setError("Failed to initialize Firebase. Check your configuration.");
      setLoading(false);
    }
  }, []);

  // Fetch lesson plans from Firestore
  useEffect(() => {
    if (!db || !userId) return;

    const collectionPath = `artifacts/${__app_id}/public/data/lessonPlans`;
    const q = query(collection(db, collectionPath));

    const unsubscribe = onSnapshot(q, (snapshot) => {
      const plans = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      setLessonPlans(plans);
    }, (error) => {
      console.error("Failed to fetch lesson plans:", error);
      setError(`Failed to fetch lesson plans: ${error.message}. Please check your Firebase Security Rules.`);
    });

    return () => unsubscribe();
  }, [db, userId]);

  // Handle logout
  const handleLogout = async () => {
    if (auth) {
      await signOut(auth);
      await signInAnonymously(auth);
    }
  };

  // Generate cover image using Gemini API
  const generateCoverImage = async () => {
    if (!coverPrompt) return;
    setGeneratingImage(true);
    setCoverImage('');
    try {
      const payload = {
        instances: { prompt: `A professional and minimalist cover image for an English lesson plan: ${coverPrompt}` },
        parameters: { "sampleCount": 1 }
      };
      const apiKey = "";
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;
      const response = await fetch(apiUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const result = await response.json();
      if (result.predictions?.[0]?.bytesBase64Encoded) {
        setCoverImage(`data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`);
      } else {
        console.error("API response error:", result);
        alert("Failed to generate image. Try a different prompt.");
      }
    } catch (error) {
      console.error("Error generating image:", error);
      alert("Failed to generate image. Please try again.");
    } finally {
      setGeneratingImage(false);
    }
  };

  // Upload lesson plan to Firestore
  const uploadLessonPlan = async () => {
    if (!newPlan.title || !newPlan.description || !newPlan.driveLink) {
      alert("Please fill in all required fields.");
      return;
    }

    setUploading(true);
    const collectionPath = `artifacts/${__app_id}/public/data/lessonPlans`;

    try {
      let imageUrl = null;
      if (coverImage) {
        const storage = getStorage();
        const imageRef = ref(storage, `lesson_covers/${Date.now()}.png`);
        await uploadString(imageRef, coverImage, 'data_url');
        imageUrl = await getDownloadURL(imageRef);
      }
      
      const planToUpload = {
        ...newPlan,
        tags: newPlan.tags.split(',').map(tag => tag.trim()).filter(tag => tag),
        coverImage: imageUrl,
        timestamp: serverTimestamp(),
      };
      
      await addDoc(collection(db, collectionPath), planToUpload);
      
      // Reset form
      setNewPlan({ title: '', description: '', tags: '', level: '', grade: '', driveLink: '' });
      setCoverPrompt('');
      setCoverImage('');
      alert("Lesson plan uploaded successfully!");
    } catch (e) {
      console.error("Error uploading lesson plan:", e);
      alert(`Failed to upload. Please check your permissions. Error: ${e.message}`);
    } finally {
      setUploading(false);
    }
  };
  
  // Lesson Plan Card Component
  const LessonPlanCard = ({ plan }) => (
    <a href={plan.driveLink} target="_blank" rel="noopener noreferrer" className="block transform transition-transform duration-300 hover:scale-105">
      <div className="bg-white rounded-xl shadow-lg overflow-hidden">
        {plan.coverImage && (
          <img src={plan.coverImage} alt={plan.title} className="w-full h-48 object-cover" />
        )}
        <div className="p-6">
          <h3 className="text-xl font-bold text-gray-800 mb-2">{plan.title}</h3>
          <p className="text-gray-600 text-sm mb-4 line-clamp-2">{plan.description}</p>
          <div className="flex flex-wrap gap-2 text-xs font-semibold text-gray-600">
            <span className="flex items-center gap-1 bg-gray-100 px-2 py-1 rounded-full"><IconTag className="w-3 h-3" /> {plan.level}</span>
            <span className="flex items-center gap-1 bg-gray-100 px-2 py-1 rounded-full"><IconTag className="w-3 h-3" /> {plan.grade}</span>
            {plan.tags.map(tag => <span key={tag} className="flex items-center gap-1 bg-gray-100 px-2 py-1 rounded-full"><IconTag className="w-3 h-3" /> {tag}</span>)}
          </div>
        </div>
      </div>
    </a>
  );

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center text-xl text-gray-600">Loading app...</div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="min-h-screen flex items-center justify-center p-8 text-center">
        <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md max-w-lg" role="alert">
          <p className="font-bold">Error</p>
          <p className="text-sm">{error}</p>
        </div>
      </div>
    );
  }

  const filteredPlans = lessonPlans.filter(plan =>
    plan.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
    (plan.description && plan.description.toLowerCase().includes(searchTerm.toLowerCase())) ||
    plan.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase())) ||
    (plan.level && plan.level.toLowerCase().includes(searchTerm.toLowerCase())) ||
    (plan.grade && plan.grade.toLowerCase().includes(searchTerm.toLowerCase()))
  );

  return (
    <div className="min-h-screen bg-gray-100 font-sans text-gray-900">
      {/* Header */}
      <header className="bg-white shadow-md">
        <div className="container mx-auto px-4 py-4 flex justify-between items-center">
          <h1 className="text-2xl font-bold text-gray-800">Teacher's Hub</h1>
          <div className="flex items-center space-x-4">
            {isAdmin && (
              <button
                onClick={() => setShowAdminPanel(!showAdminPanel)}
                className="bg-purple-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-700 transition-colors"
              >
                {showAdminPanel ? 'Close Admin Panel' : 'Open Admin Panel'}
              </button>
            )}
            <button
              onClick={handleLogout}
              className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 transition-colors"
            >
              Logout
            </button>
          </div>
        </div>
      </header>

      {/* Admin Panel */}
      {showAdminPanel && isAdmin && (
        <section className="bg-gray-50 border-b border-gray-200 p-8">
          <div className="container mx-auto">
            <h2 className="text-2xl font-bold mb-6 flex items-center gap-2 text-gray-800">
              <IconUpload className="w-6 h-6" /> Upload New Lesson Plan
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div className="space-y-4">
                <input
                  type="text"
                  placeholder="Title"
                  className="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                  value={newPlan.title}
                  onChange={(e) => setNewPlan({ ...newPlan, title: e.target.value })}
                />
                <textarea
                  placeholder="Description"
                  rows="3"
                  className="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                  value={newPlan.description}
                  onChange={(e) => setNewPlan({ ...newPlan, description: e.target.value })}
                ></textarea>
                <input
                  type="text"
                  placeholder="Tags (comma-separated)"
                  className="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                  value={newPlan.tags}
                  onChange={(e) => setNewPlan({ ...newPlan, tags: e.target.value })}
                />
                <input
                  type="text"
                  placeholder="Level (e.g., A1, B2)"
                  className="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                  value={newPlan.level}
                  onChange={(e) => setNewPlan({ ...newPlan, level: e.target.value })}
                />
                <input
                  type="text"
                  placeholder="Grade (e.g., 7th Grade)"
                  className="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                  value={newPlan.grade}
                  onChange={(e) => setNewPlan({ ...newPlan, grade: e.target.value })}
                />
                <input
                  type="url"
                  placeholder="Google Drive Link (URL)"
                  className="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                  value={newPlan.driveLink}
                  onChange={(e) => setNewPlan({ ...newPlan, driveLink: e.target.value })}
                />
                <button
                  onClick={uploadLessonPlan}
                  disabled={uploading}
                  className="w-full bg-purple-600 text-white py-3 rounded-lg font-bold hover:bg-purple-700 transition-colors disabled:opacity-50"
                >
                  {uploading ? 'Uploading...' : 'Upload Lesson Plan'}
                </button>
              </div>

              {/* Image Generator */}
              <div className="space-y-4">
                <div className="flex gap-2">
                  <input
                    type="text"
                    placeholder="Describe a cover image (e.g., 'a vibrant classroom scene')"
                    className="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                    value={coverPrompt}
                    onChange={(e) => setCoverPrompt(e.target.value)}
                  />
                  <button
                    onClick={generateCoverImage}
                    disabled={generatingImage}
                    className="bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-1"
                  >
                    <IconImage className="w-5 h-5" />
                    {generatingImage ? 'Generating...' : 'Generate'}
                  </button>
                </div>
                <div className="h-64 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden">
                  {coverImage ? (
                    <img src={coverImage} alt="Generated cover" className="w-full h-full object-cover" />
                  ) : (
                    <span className="text-gray-500">Cover Image Preview</span>
                  )}
                </div>
              </div>
            </div>
          </div>
        </section>
      )}

      {/* Hero Section */}
      <section className="bg-white py-12">
        <div className="container mx-auto px-4 text-center">
          <h2 className="text-4xl font-extrabold text-gray-800">
            A Hub for Moroccan English Teachers
          </h2>
          <p className="text-lg text-gray-600 mt-4 max-w-2xl mx-auto">
            Find and share professionally designed lesson plans for your students.
          </p>
          <div className="relative mt-8 max-w-xl mx-auto">
            <input
              type="text"
              placeholder="Search by topic, level, or grade..."
              className="w-full py-3 pl-12 pr-4 rounded-full border-2 border-gray-300 focus:outline-none focus:border-purple-500 transition-colors"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
            <IconSearch className="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-gray-400" />
          </div>
        </div>
      </section>

      {/* Lesson Plans Grid */}
      <section className="container mx-auto px-4 py-12">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {filteredPlans.length > 0 ? (
            filteredPlans.map(plan => (
              <LessonPlanCard key={plan.id} plan={plan} />
            ))
          ) : (
            <div className="col-span-full text-center p-12 bg-white rounded-xl shadow-lg">
              <p className="text-lg text-gray-500">
                No lesson plans found. Try a different search term or upload one from the admin panel!
              </p>
            </div>
          )}
        </div>
      </section>

      {/* Footer */}
      <footer className="bg-gray-800 text-white py-6 mt-12">
        <div className="container mx-auto px-4 text-center">
          <p>&copy; 2024 Teacher's Hub v2. All rights reserved.</p>
        </div>
      </footer>
    </div>
  );
}
